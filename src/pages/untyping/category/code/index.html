<!DOCTYPE html>
<html id="untyping" lang="en">

<head>

<title>Code &#8211;  Untyping</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="stylesheet" type="text/css" href="/styles/screen.css">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/styles/ie8.css">
<script src="/scripts/html5shiv.js"></script>
<![endif]-->

<!--<link rel="stylesheet" href="/styles/pygments.css" type="text/css" media="screen">-->

<link rel="alternate" type="application/rss+xml" title="Untyped RSS Feed" href="/feed/">
<link rel="alternate" type="application/atom+xml" title="Untyped Atom Feed" href="/feed/atom/">
<link rel="pingback" href="/xmlrpc.php">


<meta name="robots" content="max-image-preview:large">
<link rel="alternate" type="application/rss+xml" title="Untyped &raquo; Code Category Feed" href="/untyping/category/code/feed/">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.6.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"ğŸ³ï¸â€âš§ï¸","ğŸ³ï¸â€‹âš§ï¸")?!1:!n(e,"ğŸ‡ºğŸ‡³","ğŸ‡ºâ€‹ğŸ‡³")&&!n(e,"ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿","ğŸ´â€‹ó §â€‹ó ¢â€‹ó ¥â€‹ó ®â€‹ó §â€‹ó ¿");case"emoji":return!n(e,"ğŸ¦â€â¬›","ğŸ¦â€‹â¬›")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.6.2" type="text/css" media="all">
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}</style>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" title="JSON" type="application/json" href="/wp-json/wp/v2/categories/7">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="myna" data-goal="load">

<header id="top">
  <div class="container">
    <div class="row">
      <div class="span5 offset7">
        <div class="overlay title">
          <a href="/untyping">
            <h1><img src="/styles/images/untyping-logo.png" alt="Untyping"></h1>
            <span class="strapline">The Untyped Weblog.</span>
          </a>
        </div>

        <div class="overlay about">
          Read on and leave a comment<br>
          or <a href="/">return to our portfolio.</a>
        </div>
      </div>
    </div>
  </div>

  <div class="shadow bottom"></div>
</header>

<div id="navbar-wrapper">
  <nav id="navbar" class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
          <li><a href="/#top">Home</a></li>
          <li><a href="/jobs">Jobs</a></li>
          <li><a href="/untyping">Weblog</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>
</div>

<div class="shadow-wrapper">
  <div class="shadow top light"></div>

<div class="container">

<h1 class="pagetitle">Posts in the &#8216;Code&#8217; category</h1>

<div class="row">
<div id="blog" class="span10">
<section id="post-663" class="post-663 post type-post status-publish format-standard hentry category-code category-front-page category-fun category-general category-javascript category-myna category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">7 Aug 2013</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2013/08/07/writing-documentation-using-grunt-and-jekyll/" rel="bookmark" title="Permanent Link to Writing Documentation using Grunt and Jekyll">Writing Documentation using Grunt and Jekyll</a></h2>

      <div class="entry">
        <p>Running a startup is a lot of work. All manner of tasks constantly compete for the team&#8217;s attention mandating a careful dance to keep on top of everything. We haven&#8217;t nailed all the footwork to this dance yet, but we have learned that choosing the right tool for each job can drastically simplify the choreography.</p>
<p>We recently rewrote a large portion ofÂ <a href="http://mynaweb.com/">Myna</a> in the march towards version 2 of the platform. Most of the customer-facing software &#8211; the dashboard, client libraries, HTTP API, and so on &#8211; were completely new and required new documentation. Our existing help pages were in need of an overhaul, so we decided to move them out into their own project usingÂ a build system based onÂ <a href="http://gruntjs.com/">Grunt</a> and <a href="http://jekyllrb.com/">Jekyll</a>.</p>
<p>The new documentation is still a work-in-progress &#8211; you can watch its evolutionÂ <a href="http://help.mynaweb.com/">on the Myna website</a>Â and itsÂ <a href="http://github.com/myna/help">repository on Github</a> (yes, it&#8217;s open source &#8211; another experiment we&#8217;re trying).Â We&#8217;re really happy with the way it&#8217;s all working out, so we&#8217;veÂ <a href="https://github.com/untyped/jekyll-docs">published the build system</a>Â as a separate project that you can use to bootstrap your own documentation. Go forth, fork, and profit!</p>
<p><strong>Why Jekyll?</strong></p>
<p>Our old documentation was implemented as a set of templates in theÂ <a href="http://playframework.org/">Play 2</a>Â webÂ app that runs our marketing site and original customer dashboard. Publishing the app requires a PhD in SBT, Mongo and Redis, and if you&#8217;re writing documentation on the train (as we are prone to do) it isn&#8217;t uncommon to have your plans abruptly terminated by one of SBT&#8217;s frequent unavoidable urges to <a href="http://blog.sonatype.com/people/2011/04/how-not-to-download-the-internet/">download the whole internet</a>Â (unadvisable in the middle of signal-free rural England).</p>
<p>We considered moving to a CMS such as WordPress, but our support team are all developers with their own preferred editors and IDEs. Forcing them to write documentation (painful) in a tiny WYSIWYG editor embedded into a web site seemed like torture. Also, CMSs require internet connections&#8230; it kinda goes with the territory.</p>
<p>Grunt and Jekyll, in contrast, run completely offline, and have a number of other advantages too. Plugins like <a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a> provide instant previews via <a href="http://livereload.com/">Livereload</a>, andÂ Jekyll&#8217;s syntax highlighting (provided byÂ <a href="http://pygments.org/">Pygments</a>)Â can highlight any syntax you throw at it (including, to my amazement,Â <a href="http://help.mynaweb.com/api/experiment-create.html">HTTP</a>).<br>
Jekyll isn&#8217;t completely perfect for the job. We had to work around a few issues. Fortunately, none of them proved insurmountable:</p>
<p><strong>Versioning</strong></p>
<p>We&#8217;ve run into versioning problems many times before, some requiring some <a href="http://planet.racket-lang.org/package-source/untyped/autoplanet.plt/1/2/planet-docs/autoplanet/index.html">pretty serious workarounds</a>. In fact, versioning issues areÂ pretty much endemic across all software development platforms. In this toolchain we&#8217;re relying on lots of components: Grunt, five Grunt plugins, Ruby, and Jekyll. Fortunately, versioning is pretty much a solved problem these days: <a href="https://npmjs.org/">NPM</a> and <a href="http://bower.io/">Bower</a> are great package managers for Node, and <a href="http://bundler.io/">Bundler</a> normalizes not only the version of Jekyll we&#8217;re using, but also the version of Ruby itself.</p>
<p><strong>Static Assets (Say &#8220;NO&#8221; to Plain CSS)</strong></p>
<p>I may catch some flack for this, but CSS is a silly language riddled with missing features and <a href="http://www.w3.org/TR/css-variables/">bizarre design decisions</a>. No way are we going to battle with a new documentation project without tools likeÂ <a href="http://lesscss.org/">Less CSS</a> and <a href="http://getbootstrap.com/">Twitter Bootstrap</a>Â to support us. And ifÂ we&#8217;re compiling and minifying our CSS, we might do it for Javascript as well.Â Jekyll doesn&#8217;t support support for either process out-of-the-box.</p>
<p>One way of solving these issues would be to use Jekyll plugins &#8211; there are <a href="https://github.com/zroger/jekyll-less">many</a> <a href="https://github.com/moshen/jekyll-asset_bundler">candidates</a>Â <a href="http://matthodan.com/2012/11/22/jekyll-asset-pipeline.html">available</a> on Github. However, we prefer to use Grunt for this kind of thing, running Jekyll via <a href="https://github.com/jharding/grunt-exec">grunt-exec</a>Â andÂ <a href="http://bundler.io/">Bundler</a>,Â and using <a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a> and <a href="https://github.com/gruntjs/grunt-contrib-connect">grunt-contrib-connect</a> for preview functionality.</p>
<p><strong>Content Navigation</strong></p>
<p>Jekyll has built-in support for <a href="http://jekyllrb.com/docs/pagination/">cataloguing and paginating blog posts</a>, but it can&#8217;t natively generate navigation for a hierarchical documentation site. Fortunately, this was easy to work around with a couple of custom plugins: <a href="https://github.com/untyped/jekyll-docs/blob/master/jekyll_plugins/nav_toc.rb">one to create a table of contents</a> for the sidebar, and one to <a href="https://github.com/untyped/jekyll-docs/blob/master/jekyll_plugins/nav_pager.rb">generate next and previous buttons</a> at the bottom of each page.</p>
<p><strong>Authenticating Users</strong></p>
<p>The main navigation bar on Myna changes when users log in. Ideally we want like to keep this consistent across the main web site, the blog, and the documentation. Our solution is to built a small Javascript app to monitor the user&#8217;s login details and rewrite the navbar on demand. This is a work-in-progress project and it&#8217;s not part of the Github repo above.</p>
<p><strong>Conclusion</strong></p>
<p>If you like the idea of writing documentation in Markdown, you can get started in two minutes by cloning our Â <a href="https://github.com/untyped/jekyll-docs">Github repo</a>Â  and following the instructions in the README. We&#8217;d love to hear from you if you find our system useful, and we welcome pull requests with improvements.</p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/front-page/" rel="category tag">Front page</a>, <a href="/untyping/category/fun/" rel="category tag">Fun</a>, <a href="/untyping/category/general/" rel="category tag">General</a>, <a href="/untyping/category/javascript/" rel="category tag">Javascript</a>, <a href="/untyping/category/myna/" rel="category tag">Myna</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on Writing Documentation using Grunt and Jekyll</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-11" class="post-11 post type-post status-publish format-standard hentry category-code category-functional-programming category-scala category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">20 Oct 2011</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/10/20/the-circus-is-in-town/" rel="bookmark" title="Permanent Link to The Circus is in Town">The Circus is in Town</a></h2>

      <div class="entry">
        <p>Following a couple of late caffeinated nights, we are pleased to announce that ourÂ latest project,Â <a href="http://bigtopweb.com/">Bigtop</a>, is finally set for beta release!</p>
<p>Bigtop is a collection of libraries for web developers. Included in the first beta release are:</p>
<ul>
<li>
<a href="http://bigtopweb.com/routes">Bigtop Routes</a>Â â€“ a library for creating type-safe bidirectional mappings between URLs and Scala code;</li>
<li>
<a href="http://bigtopweb.com/routes">Bigtop Core</a>Â â€“ a library for generating and manipulating URLs and hyperlinks in a functional style.</li>
</ul>
<p>Routes uses theÂ <em>HList</em>-based approach to bidirectional pattern matching that DaveÂ <a href="http://untyped.wpengine.com/2011/10/10/reading-writing-and-the-rest/">presented</a>Â atÂ <em>Scala Lift-Off London 2011</em>. There are versions of the library for use withÂ <a href="http://liftweb.net/">Lift</a>,Â <a href="https://github.com/scalatra/scalatra">Scalatra</a>, and plain old Java servlets.</p>
<p>Check theÂ <a href="http://bigtopweb.com/">Bigtop</a>Â web site for a getting started guide, API documentation, and links to the code and Maven repository.</p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/functional-programming/" rel="category tag">Functional Programming</a>, <a href="/untyping/category/scala/" rel="category tag">Scala</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on The Circus is in Town</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-13" class="post-13 post type-post status-publish format-standard hentry category-code category-front-page category-functional-programming category-scala category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">10 Oct 2011</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/10/10/reading-writing-and-the-rest/" rel="bookmark" title="Permanent Link to Reading, Writing, and the REST">Reading, Writing, and the REST</a></h2>

      <div class="entry">
        <p>Iâ€™ve just finished preparing the slides for my talk atÂ <a href="http://skillsmatter.com/event/scala/scala-lift-off-london-2011">Scala Lift-Off London 2011</a>Â next week. The title of the talk isÂ <em>A Route to the Three â€˜Râ€™s: Reading, Writing, and the REST</em>. Hereâ€™s the abstract:</p>
<blockquote>
<p>The mappings between URLs and code form an integral part of any web application. Many web frameworks help map from URLs to code, but the reverse mapping is often neglected, leaving developers to construct URLs via haphazard string manipulation. Furthermore, many frameworks do not match URLs in a type-safe manner.</p>
<p>Scala provides all the tools we need to address this problem in a more comprehensive manner. In this talk we will walk through the creation ofÂ <a href="http://bigtopweb.com/routes">Bigtop Routes</a>, a bidirectional mapping library that is both type-safe and developer-friendly. We will pay particular attention to the ways in which Scala language features, such as flexible syntax, implicit conversions, and a touch of type-level programming, help to simplify the task at hand.</p>
</blockquote>
<p>The slides and code samples are all available from myÂ <a href="https://github.com/davegurnell/scalalol-2011-talk">Github page</a>.Â Skills Matter have posted aÂ <a href="http://skillsmatter.com/podcast/scala/reading-writing-rest">video of the talk</a>Â on their web site.</p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/front-page/" rel="category tag">Front page</a>, <a href="/untyping/category/functional-programming/" rel="category tag">Functional Programming</a>, <a href="/untyping/category/scala/" rel="category tag">Scala</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on Reading, Writing, and the REST</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-15" class="post-15 post type-post status-publish format-standard hentry category-code category-fun category-functional-programming category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">1 Sep 2011</p>
      <p class="author">by Noel</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/09/01/uu-and-you-learn-some-opa/" rel="bookmark" title="Permanent Link to UU and You: Learn Some Opa">UU and You: Learn Some Opa</a></h2>

      <div class="entry">
        <p>We want to try something a bit more interactive withÂ <a href="http://untyped.wpengine.com/2011/01/10/the-university-of-untyped/">Untyped University</a>, our preteniously titled training program. Instead of just posting papers toÂ <a href="http://www.mendeley.com/groups/771021/untyped-university/">Mendeley</a>Â weâ€™re going to hangout on G+. This should allow for easy discussion with our peers, which is to say: you.</p>
<p>For this session weâ€™re going to hack onÂ <a href="http://opalang.org/">Opa</a>. Normally we read through a paper, but we think hacking will work better over the medium. The goal is not (necessarily) to write something useful in Opa but rather to understand itâ€™s model for web development. Weâ€™re not seeking to advocate Opa, nor are we experts on the language.</p>
<p>As G+ doesnâ€™t yet support organisations, get in touch with me (email noel at untyped, or message Noel Welsh on G+) and ask to be my UU circle. Weâ€™ll be online on Friday 9 Sept from 13:37PM (+1 GMT), and will invite everyone in the circle to the hangout. See you there!</p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/fun/" rel="category tag">Fun</a>, <a href="/untyping/category/functional-programming/" rel="category tag">Functional Programming</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on UU and You: Learn Some Opa</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-19" class="post-19 post type-post status-publish format-standard hentry category-code category-fun category-scala">
  <div class="row">
    <div class="span2 meta">
      <p class="date">27 May 2011</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/05/27/friday-fun-with-scala-syntax/" rel="bookmark" title="Permanent Link to Friday fun with Scala syntax">Friday fun with Scala syntax</a></h2>

      <div class="entry">
        <p>Itâ€™s Friday â€“ time to kick back and relax with two fun Scala programs we put together for your amusement.</p>
<p>Scala has a pretty flexible syntax (although not as flexible asÂ <a href="http://www.ccs.neu.edu/scheme/pubs/scheme2007-ctf.pdf">Racketâ€™s</a>, of course) that makes it popular amongst proponents ofÂ <a href="http://www.scala-lang.org/node/1403">DSLs</a>. Not all DSLs have to be serious, however, as Iâ€™m about to prove.</p>
<p>First up is Noelâ€™s original concept â€“ proof of his love for DSLs, expressed in purest code:</p>
<div>
<pre><code> class A(num: Int) { def Scala = "It's s" + ("o" * num) + " much fun!" } object I { def &lt;(num: Int) = new A(num) } I &lt;3 Scala // ==&gt; "It's sooo much fun!" </code></pre>
</div>
<p>Second is a simpler work that I call â€œThe Startled Lolcatâ€:</p>
<div>
<pre><code> object O { def o = "What has been seen, cannot be unseen." } O.o // ==&gt; "What has been seen, cannot be unseen."</code></pre>
<pre><code>
</code></pre>
</div>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/fun/" rel="category tag">Fun</a>, <a href="/untyping/category/scala/" rel="category tag">Scala</a> |
                <span>Comments Off<span class="screen-reader-text"> on Friday fun with Scala syntax</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-23" class="post-23 post type-post status-publish format-standard hentry category-business category-code category-design category-functional-programming category-scala">
  <div class="row">
    <div class="span2 meta">
      <p class="date">23 May 2011</p>
      <p class="author">by Noel</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/05/23/the-future-of-voip-phone-configuration-interfaces/" rel="bookmark" title="Permanent Link to The Future of VoIP Phone Configuration Interfaces">The Future of VoIP Phone Configuration Interfaces</a></h2>

      <div class="entry">
        <p>Weâ€™ve recently completed a very fun and interesting job working on a new interface for managingÂ <a href="http://en.wikipedia.org/wiki/Voice_over_IP">VoIP</a>Â phone systems. We have a VoIP phone, provided byÂ <a href="http://loho.co.uk/">Loho</a>, who were also our client for this project. Itâ€™s great â€” we can forward calls to our mobiles, cart the phone around with us (plug it into a network connections and it just works), and it even emails us our voice messages. The only thing not great about our phone is the configuration interface. Luckily, thatâ€™s what this project set out to solve.</p>
<p>The brief was to implement an elegant online phone configuration system. Alex, Director at Loho, provided the vision. We provided two weeks of development time, which was enough to create a working prototype. Alex has asked us to not give away too many details about the system, but I can show you a few screenshots. First up, hereâ€™s the main screen:</p>
<p><a href="http://untyped.wpengine.com/wp-content/uploads/2011/05/loho-main-menu-sml.png"><img fetchpriority="high" decoding="async" title="loho-main-menu-sml" src="http://untyped.wpengine.com/wp-content/uploads/2011/05/loho-main-menu-sml.png" alt="The very stylish main menu of the VoIP administration tool we've built for Loho." width="420" height="197"></a></p>
<p>The very stylish main menu of the VoIP administration tool we&#8217;ve built for Loho.</p>
<p>Doesnâ€™t give away much, does it? A bit more interesting is a detail of editing a configuration:</p>
<p><a href="http://untyped.wpengine.com/wp-content/uploads/2011/05/loho-editor-sml.png"><img decoding="async" title="loho-editor-sml" src="http://untyped.wpengine.com/wp-content/uploads/2011/05/loho-editor-sml.png" alt="Also very stylish: editing the configuration of a voice menu" width="420" height="366"></a></p>
<p>Also very stylish: editing the configuration of a voice menu</p>
<p>Here Iâ€™m editing a voice menu â€” one of those â€œPress 1 if youâ€™re interested in giving us all your moneyâ€ type things.</p>
<p>We think weâ€™ve created a very nice system. Loho tell us they were overwhelmed with interest at a recent tradefair, suggesting weâ€™re not alone in our opinion. While the interface is an important aspect of the work, the backend (which I can talk about!) is just as important. The main task was defining a data model to capture the rich feature set that Loho provide. This turned out to be very similar to designing a programming language and its intermediate representation. For example, we use aÂ <a href="http://en.wikipedia.org/wiki/Continuation-passing_style">continuation-passing style</a>Â representation to avoid maintaining a stack on the server side. Our representation distinguishes between tail calls and normal function calls to avoid excessive resource consumption on the VoIP side. Relational databases donâ€™t do a very good job of storing recursive datastructures, like theÂ <a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a>Â of a programming language, so we used Mongo for the data store. In addition to its flexible data model,Â <a href="http://www.youtube.com/watch?v=b2F-DItXtZs">Mongo is web scale</a>Â which has given us an immediate status boost at local programmer meetups.</p>
<p>The backend code is implemented in Scala and Lift. There are actually two interfaces to the service. One is the nice interface the users see, and the other is a REST interface that is called by the Asterisk AGI scripts that implement the VoIP functionality. The Asterisk system doesnâ€™t handle all the functionality we represent internally, so the REST interface includes a small interpreter that executes intermediate steps till we arrive at something Asterisk deals with.</p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/business/" rel="category tag">Business</a>, <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/design/" rel="category tag">Design</a>, <a href="/untyping/category/functional-programming/" rel="category tag">Functional Programming</a>, <a href="/untyping/category/scala/" rel="category tag">Scala</a> |
                <span>Comments Off<span class="screen-reader-text"> on The Future of VoIP Phone Configuration Interfaces</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-25" class="post-25 post type-post status-publish format-standard hentry category-code category-front-page category-javascript category-scala category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">6 Mar 2011</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/03/06/javascript-compilation-for-sbt/" rel="bookmark" title="Permanent Link to Javascript compilation for SBT">Javascript compilation for SBT</a></h2>

      <div class="entry">
        <p>Over the weekend I knocked up a littleÂ <a href="https://github.com/davegurnell/sbt-closure">SBT plugin</a>Â to wrap up the Javascript resources in ourÂ <a href="http://liftweb.net/">Lift</a>Â projects and deploy them as one big minified file. Read on to find out how it works, then grab yourself a copy and take it for a spin.</p>
<p>The plugin scans yourÂ <tt>webapps</tt>Â directory and looks for files with the extensionsÂ <tt>.jsm</tt>Â orÂ <tt>.jsmanifest</tt>. These files, calledÂ <em>Javascript Manifests</em>, describe lists of Javascript sources that should be combined into a single file. For example:</p>
<pre># You can specify remote files using URLs...

http://code.jquery.com/jquery-1.5.1.js

# ...and local files using regular paths
#    (relative to the location of the manifest):

lib/foo.js
bar.js

# Blank lines and bash-style comments are also supported</pre>
<p>Manifest compilation happens in two phases: first, the plugin downloads and caches any remote scripts specified using URLs. Second, it feeds all of the sources (remote and local) into Googleâ€™s<a href="http://code.google.com/closure/compiler/">Closure Compiler</a>, which concatenates them and minifies everything (and provides excellent services like static type checking to boot). The output from the compiler is aÂ <tt>.js</tt>Â file with the same base name and relative path as the original manifest.</p>
<p>Thereâ€™s not a lot more to it than that. The plugin hooks into SBTâ€™s standard compile and package phases, so your Javascript gets rebuilt automatically alongside your Scala code. If this sounds useful to you, please feel free to grab a copy and take it for a spin. Full details are available in the README onÂ <a href="https://github.com/davegurnell/sbt-closure">Github</a>.</p>
<p>I should point out that there are other useful SBT plugins that do a similar job. For example, I plagiarised extensively from Jon Hoffmanâ€™s<a href="https://github.com/hoffrocket/sbt-yui">YUI Compressor plugin</a>Â and Luke Amdorâ€™sÂ <a href="https://github.com/rubbish/coffee-script-sbt-plugin">Coffee Script plugin</a>Â when writing my code. These two particular examples donâ€™t do file combination, though, and that was an important feature for our specific use case.</p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/front-page/" rel="category tag">Front page</a>, <a href="/untyping/category/javascript/" rel="category tag">Javascript</a>, <a href="/untyping/category/scala/" rel="category tag">Scala</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on Javascript compilation for SBT</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-30" class="post-30 post type-post status-publish format-standard hentry category-code category-scala category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">2 Mar 2011</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/03/02/setting-the-run-mode-in-lift-web-apps/" rel="bookmark" title="Permanent Link to Setting the run.mode in Lift web apps">Setting the run.mode in Lift web apps</a></h2>

      <div class="entry">
        <p><strong>Update: You can now set the run mode easy and conveniently using ourÂ <a href="https://github.com/untyped/sbt-plugins/tree/master/sbt-runmode">sbt-runmode</a>Â plugin for SBT.</strong></p>
<div>
<p>Setting theÂ <a href="http://www.assembla.com/wiki/show/liftweb/Run_Modes"><code>run.mode</code></a>Â in Lift applications is the source of a surprising number of questions. The documentation recommends passing it as a parameter when the JVM is invoked. This can be hard to achieve for various reasons. In our case our deployment is automated usingÂ <a href="http://www.opscode.com/">Chef</a>, and scripts to start and stop the Jetty web server are installed by the package manager. We donâ€™t really want to monkey around with these scripts, so we had to find another way. Jetty is written in Java, which means it must have a ridiculously complex XML configuration language. The Jetty developers turned it up to 11 by making their configuration language Turing complete, so we can actually set the system properties in a configuration file. The file we want to create is<code>WEB-INF/jetty-web.xml</code>Â and we want it to contain this:</p>
<p>&nbsp;</p>
<div id="gist-851037">
<div>
<div>
<div>
<div id="LC1">&lt;?xml version=&#8221;1.0&#8243;?&gt;</div>
<div id="LC2">&lt;!DOCTYPE Configure PUBLIC &#8220;-//Mort Bay Consulting//DTD Configure//EN&#8221; &#8220;http://jetty.mortbay.org/configure.dtd&#8221;&gt;</div>
<div id="LC3">&lt;Configure class=&#8221;org.mortbay.jetty.webapp.WebAppContext&#8221;&gt;</div>
<div id="LC4">Â Â &lt;Call class=&#8221;java.lang.System&#8221; name=&#8221;setProperty&#8221;&gt;</div>
<div id="LC5">Â Â Â Â &lt;Arg&gt;run.mode&lt;/Arg&gt;</div>
<div id="LC6">Â Â Â Â &lt;Arg&gt;production&lt;/Arg&gt;</div>
<div id="LC7">Â Â &lt;/Call&gt;</div>
<div id="LC8">&lt;/Configure&gt;</div>
</div>
</div>
<div>
<a href="https://gist.github.com/raw/851037/c5a9010f6878f41cf1076b0b3ee93560c1aa374a/jetty-web.xml">view raw</a><a href="https://gist.github.com/851037#file_jetty_web.xml">jetty-web.xml</a><a href="https://gist.github.com/851037">This Gist</a>Â brought to you byÂ <a href="http://github.com/">GitHub</a>.</div>
</div>
</div>
<p>&nbsp;</p>
<p>If we leave this around then our application will always run in production mode. We donâ€™t want this when weâ€™re developing as we wonâ€™t, for instance, get stack traces printed to the browser. Thus we should copy this file in when we package up the project, and remove it when the packaging step completes. Assuming youâ€™re using SBT, store the above text inÂ <code>project/jetty-web.xml</code>Â and add the following to your SBT project file to get this functionality:</p>
<p>&nbsp;</p>
<div id="gist-851037">
<div>
<div>
<div>
<div id="LC1">Â Â val jettyWebPath = &#8220;src&#8221; / &#8220;main&#8221; / &#8220;webapp&#8221; / &#8220;WEB-INF&#8221; / &#8220;jetty-web.xml&#8221;</div>
<div id="LC2"></div>
<div id="LC3">Â Â lazy val installProductionRunMode = task {</div>
<div id="LC4">Â Â Â Â FileUtilities.copyFile(&#8220;project&#8221; / &#8220;jetty-web.xml&#8221;,</div>
<div id="LC5">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â jettyWebPath,</div>
<div id="LC6">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â log)</div>
<div id="LC7">Â Â Â Â log.info(&#8220;Copied jetty-web.xml into place&#8221;)</div>
<div id="LC8">Â Â Â Â None</div>
<div id="LC9">Â Â } describedAs(&#8220;Install a jetty-web.xml that sets the run mode to production&#8221;)</div>
<div id="LC10"></div>
<div id="LC11">Â Â lazy val superPackage = super.packageAction dependsOn(installProductionRunMode)</div>
<div id="LC12"></div>
<div id="LC13">Â Â lazy val removeProductionRunMode = task {</div>
<div id="LC14">Â Â Â Â FileUtilities.clean(jettyWebPath, log)</div>
<div id="LC15">Â Â Â Â None</div>
<div id="LC16">Â Â } describedAs(&#8220;Remove jetty-web.xml and hence set run mode back to testing&#8221;)</div>
<div id="LC17"></div>
<div id="LC18">Â Â override def packageAction = removeProductionRunMode dependsOn(superPackage) describedAs BasicWebScalaProject.PackageWarDescription</div>
</div>
</div>
<div>
<a href="https://gist.github.com/raw/851037/b5bb3e118e97dfe443d9b8b26a3fca011c8d25e7/Project.scala">view raw</a><a href="https://gist.github.com/851037#file_project.scala">Project.scala</a><a href="https://gist.github.com/851037">This Gist</a>Â brought to you byÂ <a href="http://github.com/">GitHub</a>.</div>
</div>
</div>
<p>&nbsp;</p>
<p>This is pretty simple code. Basically it redefines theÂ <code>package</code>Â action to first copy in theÂ <code>jetty-web.xml</code>Â file, then it runs the original package action, and finally it deletes theÂ <code>jetty-web.xml</code>. Now anyÂ <code>WAR</code>files you run under Jetty will automatically be in production mode, but calling<code>sbt jetty-run</code>Â will still give you development mode.</p>
</div>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/scala/" rel="category tag">Scala</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on Setting the run.mode in Lift web apps</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-34" class="post-34 post type-post status-publish format-standard hentry category-business category-code category-design category-front-page category-general category-myna category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">11 Feb 2011</p>
      <p class="author">by Noel</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/02/11/stop-ab-testing-and-make-out-like-a-bandit/" rel="bookmark" title="Permanent Link to Stop A/B Testing and Make Out Like a Bandit">Stop A/B Testing and Make Out Like a Bandit</a></h2>

      <div class="entry">
        <p><strong>This is the blog post that led toÂ <a href="https://mynaweb.com/?utm_source=untyping&amp;utm_medium=post&amp;utm_campaign=myna">Myna</a>. Sign up now and help us beta test the worldâ€™s fastest A/B testing product!</strong></p>
<p>Were I a betting man, I would wager this: the supermarket nearest to you is laid out with fresh fruit and vegetables near the entrance, and dairy and bread towards the back of the shop. Iâ€™m quite certain Iâ€™d win this bet enough times to make it worthwhile. This layout is, of course, no accident. By placing essentials in the corners, the store forces shoppers to traverse the entire floor to get their weekly shop. This increases the chance of an impulse purchase and hence the storeâ€™s revenue.</p>
<p>I donâ€™t know who developed this layout, but at some point someone must have tested it and it obviously worked. The same idea applies online, where it is incredibly easy to change the â€œlayoutâ€ of a store. Where the supermarket might shuffle around displays or change the lighting, the online retailer might change the navigational structure or wording of their landing page. I call this processÂ <em>content optimisation</em>.</p>
<p>Any prospective change should be tested to ensure it has a positive effect on revenue (or some other measure, such as clickthroughs). The industry standard method for doing this isÂ <a href="http://untyped.wpengine.com/2010/07/22/epistemology-and-ab-testing/">A/B testing</a>. However, it is well known in the academic community thatÂ <em>A/B testing is significantly suboptimal</em>. In this post Iâ€™m going to explain why, and how you can do better.</p>
<p>There are several problems with A/B testing:</p>
<ul>
<li>A/B testing is suboptimal. It simply doesnâ€™t increase revenue as much as better methods.</li>
<li>A/B testing is inflexible. You canâ€™t, for example, add a new choice to an already running test.</li>
<li>A/B testing has a tedious workflow. To do it correctly, you have to make lots of seemingly arbitrary choices (p-value, experiment size) to run an experiment.</li>
</ul>
<p>The methods Iâ€™m going to describe, which are known asÂ <a href="http://en.wikipedia.org/wiki/Multi-armed_bandit">bandit algorithms</a>, solve all these problems. But first, letâ€™s look at the problems of A/B testing in more detail.</p>
<h2>Suboptimal Performance</h2>
<p>Explaining the suboptimal performance of A/B testing is tricky without getting into a bit of statistics. Instead of doing that, Iâ€™m going to describe the essence of the problem in a (hopefully) intuitive way. Letâ€™s start by outlining the basic A/B testing scenario, so there is no confusion. In the simplest situation are two choices, A and B, under test. Normally one of them is already running on the site (letâ€™s call that one A), and the other (B) is what weâ€™re considering replacing A with. We run an experiment and then look for a significant difference, where I meanÂ <a href="http://en.wikipedia.org/wiki/Statistical_significance">significance</a>Â in the statistical sense. If B is significantly better we replace A with B, otherwise we keep A on the site.</p>
<p>The key problem with A/B testing is it doesnâ€™t respect what the significance test is actually saying. When a test shows B is significantly better than A, it is right to throw out A. However, when there is no significant difference the test isÂ <em>not</em>Â saying that B is no better than A, but rather that the data does not support any conclusion. A might be better than B, B might be better than A, or they might be the same. We just canâ€™t tell with the data that is available*. It might seem we could just run the test until a significant result appears, but that runs into the problem ofÂ <a href="http://www.evanmiller.org/how-not-to-run-an-ab-test.html">repeated significance testing errors</a>. Oh dear! Whatever we do, if we stick exclusively with A/B testing weâ€™re going to make mistakes, and probably more than we realise.</p>
<p>A/B testing is also suboptimal in another way â€” it doesnâ€™t take advantage of information gained during the trial. Every time you display a choice you get information, such as a click, a purchase, or an indifferent user leaving your site. This information is really valuable, and you could make use of it in your test, but A/B testing simply discards it. There are good statistical reasons to not use information gained during a trial within the A/B testing framework, but if we step outside that framework we can.</p>
<p>* Technically, the reason for this is that the probability of a type II error increases as the probability of a type I error decreases. We control the probability of a type I error with the p-value, and this is typically set low. So if we drop option B when the test is not significant we have a high probability of making a type II error.</p>
<h2>Inflexible</h2>
<p>The A/B testing setup is very rigid. You canâ€™t add new choices to the test, so you canâ€™t, say, test the best news item to display on the front page of a site. You canâ€™t dynamically adjust what you display based on information you have about the user â€” say, what they purchased last time they visited. You also canâ€™t easily test more than two choices.</p>
<h2>Workflow</h2>
<p>To setup an A/B experiment you need to choose the significance level and the number of trials. These choices are often arbitrary, but they can have a major impact on results. You then need to monitor the experiment and, when it concludes, implement the results. There are a lot of manual steps in this workflow.</p>
<h2>Make out like a Bandit</h2>
<p>Algorithms for solving the so-called bandit problem address all the problems with A/B testing. To summarise, they give optimal results (to within constant factors), they are very flexible, and they have a fire-and-forget workflow.</p>
<p>So, what is the bandit problem? You have a set of choices you can make. On the web these could be different images to display, or different wordings for a button, and so on. Each time you make a choice you get a reward. For example, you might get a reward of 1 if a button is clicked, and reward of 0 otherwise. Your goal is to maximise your total reward over time. This clearly fits the content optimisation problem.</p>
<p>The bandit problem has been studied for over 50 years, but only in the last ten years have practical algorithms been developed. We studied one suchÂ <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.98.9211&amp;rep=rep1&amp;type=pdf">paper</a>Â inÂ <a href="http://untyped.wpengine.com/2011/01/10/the-university-of-untyped/">UU</a>. The particular details of the algorithm we studied are not important (if you are interested, read the paper â€“ itâ€™s very simple); here I want to focus on the general principles of bandit algorithms.</p>
<p>The first point is that the bandit problem explicitly includes the idea that we make use of information as it arrives. This leads to what is called the exploration-exploitation dilemma: do we try many different choices to gain a better estimate of their reward (exploration) or try the choices that have worked well in the past (exploitation)?</p>
<p>The performance of an algorithm is typically measured by itsÂ <a href="http://en.wikipedia.org/wiki/Regret_(decision_theory)">regret</a>, which is the average difference between its actual performance and the best possible performance.Â <a href="http://dx.doi.org/10.1016/0196-8858(85)90002-8">It has been shown</a>Â that the best possible regret increases logarithmically with the number of choices made, andÂ <em>modern bandit algorithms are optimal</em>Â (seeÂ <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.98.9211&amp;rep=rep1&amp;type=pdf">the UU paper</a>, for instance).</p>
<p>Bandit algorithms are very flexible. They can deal with as many choices as necessary. Variants of the basic algorithms can handle addition and removal of choices, selection of the bestÂ <em>k</em>Â choices, and exploitation of information known about the visitor.</p>
<p>Bandits are also simple to use. Many of the algorithms have no parameters to set, and unlike A/B testing there is no need to monitor them â€” they will continue working indefinitely.</p>
<p>Finally, we know bandits work on the web, as much of the current research on them is coming out ofÂ <a href="http://www.cs.toronto.edu/~tl/papers/context-aistats.pdf">Google</a>,Â <a href="http://research.microsoft.com/en-us/projects/bandits/">Microsoft</a>,Â <a href="http://labs.yahoo.com/files/Explore-exploit-ICDM09.pdf">Yahoo!</a>, and other big Internet companies.</p>
<p>So there you have it. Stop wasting time on A/B testing and make out like a bandit!</p>
<h2>Join Our Merry Band</h2>
<p>Finally, you probably wonâ€™t be surprised to hear we are developing a content optimisation system based on bandit algorithms. I am giving a talk on this at the Multipack Show and Tell in Birmingham this Saturday.</p>
<p>We are currently building a prototype, and are looking for people to help us evaluate it. If you want more information, or would like to get involved,Â <a href="mailto:info@untyped.com">get in touch</a>Â and weâ€™ll let you know when weâ€™re ready to go.</p>
<p><strong>Update: In case you missed it at the top,Â <a href="http://www.mynaweb.com/">Myna</a>Â is our content optimisation system based on bandit algorithms and weâ€™re accepting beta users right now!</strong></p>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/business/" rel="category tag">Business</a>, <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/design/" rel="category tag">Design</a>, <a href="/untyping/category/front-page/" rel="category tag">Front page</a>, <a href="/untyping/category/general/" rel="category tag">General</a>, <a href="/untyping/category/myna/" rel="category tag">Myna</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on Stop A/B Testing and Make Out Like a Bandit</span></span>      </p>
    </div>
  </div>
</section>

<section id="post-37" class="post-37 post type-post status-publish format-standard hentry category-code category-front-page category-fun category-javascript category-web-development">
  <div class="row">
    <div class="span2 meta">
      <p class="date">24 Jan 2011</p>
      <p class="author">by Dave</p>
    </div>

    <div class="span8">
      <h2><a href="/untyping/2011/01/24/smooth-scrolling-for-mobile-safari/" rel="bookmark" title="Permanent Link to Smooth Scrolling for Mobile Safari">Smooth Scrolling for Mobile Safari</a></h2>

      <div class="entry">
        <p>I recently wrote aÂ <a href="http://jquery.com/">jQuery</a>Â plugin to do some smooth scrolling on the iPad, and I thought Iâ€™d share the code with everyone.</p>
<p>The effect you get is very similar to the iOS home screen. The user touches the screen and drags to scroll. Releasing the screen causes it to spring to the most appropriate page based upon the last dragging position and speed.</p>
<p>Gurus of front end development tell us that pretty much the only way to get smooth transitions on the iPad is to use 3D CSS transforms. After experimenting with jQuery animations and 2D CSS transforms, I pretty much concur: jQuery animations yield one or two frames per second, and 2D CSS transforms arenâ€™t much better. 3D CSS transforms, on the other hand, are hardware accelerated and smooth as silk.</p>
<p>You can get the code from thisÂ <a href="https://gist.github.com/791997">Gist</a>Â on Github (contributions and enhancements welcome). Use it with the following HTML:</p>
<div>
<pre><code> &lt;div id="viewport"&gt; &lt;div&gt;First page&lt;/div&gt; &lt;div&gt;Second page&lt;/div&gt; &lt;div&gt;Third page&lt;/div&gt; &lt;/div&gt; </code></pre>
</div>
<p>and the following Javascript:</p>
<div>
<pre><code> $("#viewport").scrollpane(); </code></pre>
</div>
<p>Thereâ€™s a demo of it in actionÂ <a href="http://boxandarrow.com/demos/ios-scroll/">here</a>. A couple of notes:</p>
<ul>
<li>Because this hooks into touch gesture events and CSS3 3D transforms, itâ€™ll pretty much only work on iDevices and possibly other Webkit-based tablets.</li>
<li>It works horizontally and vertically, but Iâ€™d recommend only using it horizontally in a regular web page because it interferes with Safariâ€™s natural screen bounce. I had the benefit of a working on an offline brochure where the web page never scrolls naturally. In this environment the plugin really shines. If you are interested in doing something similar, take a look at the iPad appÂ <a href="http://www.hiddenmemory.co.uk/delivery-site.html">Delivery Site</a>, which lets you customise various things like this.</li>
<li>There are a couple of options you can tweak to affect things like dead-zones before a drag will trigger a page transition. See the top of the source code for details.</li>
<li>When the first 3D transform is added to a page, Mobile Safari seems to transparently install an OpenGL panel to handle the effects. This causes a rendering glitch thatâ€™s just faintly visible if youâ€™re paying attention. The plugin works around this by setting an identity transform on the scroll component on page load. Webkit is presumably frugal about 3D-ification for a reason, so you may find your web pages take more memory and CPU resources with this plugin active than without.</li>
<li>Really large (read â€œmany-page, full-screenâ€) scroll panes can be very heavy on the browser. This is presumably due to the overhead of creating a texture buffer to 3D accelerate the transitions. Iâ€™ve managed five-page full-screen scrolling transitions without problems, but your mileage may vary.</li>
</ul>
      </div>

      <p class="tags">
                Posted in <a href="/untyping/category/code/" rel="category tag">Code</a>, <a href="/untyping/category/front-page/" rel="category tag">Front page</a>, <a href="/untyping/category/fun/" rel="category tag">Fun</a>, <a href="/untyping/category/javascript/" rel="category tag">Javascript</a>, <a href="/untyping/category/web-development/" rel="category tag">Web development</a> |
                <span>Comments Off<span class="screen-reader-text"> on Smooth Scrolling for Mobile Safari</span></span>      </p>
    </div>
  </div>
</section>

<nav>
  <div class="row">
    <div class="span8 offset2">
      <span class="newer"></span>
      <span class="older"><a href="/untyping/category/code/page/2/">Older Entries &raquo;</a></span>
      <div class="clear"></div>
    </div>
  </div>
</nav>


</div>
<div class="span2">

<div id="sidebar" class="small column two-of-two width300">

<ul>
<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form></li>
		<li id="recent-posts-2" class="widget widget_recent_entries">
		<h2 class="widgettitle">Recent Posts</h2>
		<ul>
											<li>
					<a href="/untyping/2013/08/07/writing-documentation-using-grunt-and-jekyll/">Writing Documentation using Grunt and Jekyll</a>
									</li>
											<li>
					<a href="/untyping/2012/10/19/meanwhile-at-untyped-hq/">Meanwhile, at Untyped HQ&#8230;</a>
									</li>
											<li>
					<a href="/untyping/2012/08/28/new-site/">New site</a>
									</li>
											<li>
					<a href="/untyping/2012/06/06/myna-for-wordpress-available-now/">Myna for WordPress available now!</a>
									</li>
											<li>
					<a href="/untyping/2011/10/20/the-circus-is-in-town/">The Circus is in Town</a>
									</li>
					</ul>

		</li>
<li id="recent-comments-2" class="widget widget_recent_comments">
<h2 class="widgettitle">Recent Comments</h2>
<ul id="recentcomments"></ul>
</li>
<li id="archives-2" class="widget widget_archive">
<h2 class="widgettitle">Archives</h2>
			<ul>
					<li><a href="/untyping/2013/08/">August 2013</a></li>
	<li><a href="/untyping/2012/10/">October 2012</a></li>
	<li><a href="/untyping/2012/08/">August 2012</a></li>
	<li><a href="/untyping/2012/06/">June 2012</a></li>
	<li><a href="/untyping/2011/10/">October 2011</a></li>
	<li><a href="/untyping/2011/09/">September 2011</a></li>
	<li><a href="/untyping/2011/08/">August 2011</a></li>
	<li><a href="/untyping/2011/05/">May 2011</a></li>
	<li><a href="/untyping/2011/03/">March 2011</a></li>
	<li><a href="/untyping/2011/02/">February 2011</a></li>
	<li><a href="/untyping/2011/01/">January 2011</a></li>
	<li><a href="/untyping/2010/12/">December 2010</a></li>
	<li><a href="/untyping/2010/11/">November 2010</a></li>
	<li><a href="/untyping/2010/10/">October 2010</a></li>
	<li><a href="/untyping/2010/07/">July 2010</a></li>
	<li><a href="/untyping/2010/06/">June 2010</a></li>
	<li><a href="/untyping/2010/05/">May 2010</a></li>
	<li><a href="/untyping/2010/04/">April 2010</a></li>
	<li><a href="/untyping/2010/03/">March 2010</a></li>
	<li><a href="/untyping/2010/02/">February 2010</a></li>
	<li><a href="/untyping/2010/01/">January 2010</a></li>
	<li><a href="/untyping/2009/07/">July 2009</a></li>
	<li><a href="/untyping/2009/06/">June 2009</a></li>
	<li><a href="/untyping/2009/04/">April 2009</a></li>
	<li><a href="/untyping/2009/03/">March 2009</a></li>
	<li><a href="/untyping/2009/01/">January 2009</a></li>
	<li><a href="/untyping/2008/11/">November 2008</a></li>
	<li><a href="/untyping/2008/10/">October 2008</a></li>
	<li><a href="/untyping/2008/09/">September 2008</a></li>
	<li><a href="/untyping/2008/08/">August 2008</a></li>
	<li><a href="/untyping/2008/07/">July 2008</a></li>
	<li><a href="/untyping/2008/06/">June 2008</a></li>
	<li><a href="/untyping/2008/05/">May 2008</a></li>
	<li><a href="/untyping/2008/04/">April 2008</a></li>
	<li><a href="/untyping/2008/03/">March 2008</a></li>
	<li><a href="/untyping/2008/02/">February 2008</a></li>
	<li><a href="/untyping/2008/01/">January 2008</a></li>
	<li><a href="/untyping/2007/12/">December 2007</a></li>
	<li><a href="/untyping/2007/11/">November 2007</a></li>
	<li><a href="/untyping/2007/10/">October 2007</a></li>
	<li><a href="/untyping/2007/09/">September 2007</a></li>
	<li><a href="/untyping/2007/08/">August 2007</a></li>
	<li><a href="/untyping/2007/07/">July 2007</a></li>
	<li><a href="/untyping/2007/06/">June 2007</a></li>
	<li><a href="/untyping/2007/05/">May 2007</a></li>
	<li><a href="/untyping/2007/04/">April 2007</a></li>
	<li><a href="/untyping/2007/03/">March 2007</a></li>
	<li><a href="/untyping/2007/02/">February 2007</a></li>
	<li><a href="/untyping/2007/01/">January 2007</a></li>
	<li><a href="/untyping/2006/12/">December 2006</a></li>
	<li><a href="/untyping/2006/11/">November 2006</a></li>
	<li><a href="/untyping/2006/10/">October 2006</a></li>
	<li><a href="/untyping/2006/09/">September 2006</a></li>
	<li><a href="/untyping/2006/08/">August 2006</a></li>
	<li><a href="/untyping/2006/07/">July 2006</a></li>
	<li><a href="/untyping/2006/06/">June 2006</a></li>
	<li><a href="/untyping/2006/05/">May 2006</a></li>
	<li><a href="/untyping/2006/04/">April 2006</a></li>
	<li><a href="/untyping/2006/03/">March 2006</a></li>
	<li><a href="/untyping/2006/02/">February 2006</a></li>
	<li><a href="/untyping/2006/01/">January 2006</a></li>
	<li><a href="/untyping/2005/12/">December 2005</a></li>
	<li><a href="/untyping/2005/11/">November 2005</a></li>
	<li><a href="/untyping/2005/10/">October 2005</a></li>
	<li><a href="/untyping/2005/09/">September 2005</a></li>
	<li><a href="/untyping/2005/08/">August 2005</a></li>
	<li><a href="/untyping/2005/07/">July 2005</a></li>
	<li><a href="/untyping/2005/06/">June 2005</a></li>
	<li><a href="/untyping/2005/05/">May 2005</a></li>
	<li><a href="/untyping/2005/04/">April 2005</a></li>
			</ul>

			</li>
<li id="categories-2" class="widget widget_categories">
<h2 class="widgettitle">Categories</h2>
			<ul>
					<li class="cat-item cat-item-10">
<a href="/untyping/category/business/">Business</a>
</li>
	<li class="cat-item cat-item-7 current-cat">
<a aria-current="page" href="/untyping/category/code/">Code</a>
</li>
	<li class="cat-item cat-item-11">
<a href="/untyping/category/design/">Design</a>
</li>
	<li class="cat-item cat-item-3">
<a href="/untyping/category/front-page/">Front page</a>
</li>
	<li class="cat-item cat-item-9">
<a href="/untyping/category/fun/">Fun</a>
</li>
	<li class="cat-item cat-item-6">
<a href="/untyping/category/functional-programming/">Functional Programming</a>
</li>
	<li class="cat-item cat-item-1">
<a href="/untyping/category/general/">General</a>
</li>
	<li class="cat-item cat-item-12">
<a href="/untyping/category/javascript/">Javascript</a>
</li>
	<li class="cat-item cat-item-14">
<a href="/untyping/category/kahu/">Kahu</a>
</li>
	<li class="cat-item cat-item-4">
<a href="/untyping/category/myna/">Myna</a>
</li>
	<li class="cat-item cat-item-13">
<a href="/untyping/category/racket/">Racket</a>
</li>
	<li class="cat-item cat-item-8">
<a href="/untyping/category/scala/">Scala</a>
</li>
	<li class="cat-item cat-item-5">
<a href="/untyping/category/web-development/">Web development</a>
</li>
			</ul>

			</li>
<li id="meta-2" class="widget widget_meta">
<h2 class="widgettitle">Meta</h2>
		<ul>
						<li><a href="/wp-login.php">Log in</a></li>
			<li><a href="/feed/">Entries feed</a></li>
			<li><a href="/comments/feed/">Comments feed</a></li>

			<li><a href="https://en-gb.wordpress.org/">WordPress.org</a></li>
		</ul>

		</li>
</ul>
</div>


</div>
</div>
</div>

</div>

<footer id="contact">
  <div class="shadow top"></div>

  <div class="container">
    <h2>Stay in touch</h2>

    <dl>
      <dt>Telephone</dt>
      <dd><a href="callto:+441212857400">0121 285 7400</a></dd>

      <dt>Email</dt>
      <dd><span class="email"><span class="recipient">info</span> at <span class="domain">untyped</span></span></dd>

      <dt>Twitter</dt>
      <dd><a href="http://twitter.com/untyped">@untyped</a></dd>

      <dt>Address</dt>
      <dd>
        <address>
          Untyped<br>
          The Skiff<br>
          30 Cheapside<br>
          Brighton BN1 4GD
        </address>
      </dd>

      <dt>UK company number</dt>
      <dd>06226466</dd>

      <dt>UK VAT number</dt>
      <dd>941 0528 46</dd>
    </dl>

    <p class="copyright">
      Copyright 2009 to 2017 <a href="/">Untyped Ltd</a>.
      Powered by <a href="http://wordpress.org/" class="nocolor">WordPress</a>.
      <a href="/terms" class="nocolor">Terms of use</a>.
    </p>
  </div>
</footer>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">_uacct = "UA-183641-1";
urchinTracker();</script>

<script src="//code.jquery.com/jquery-1.8.0.min.js"></script>
<script src="/scripts/untyped.js"></script>

</body>
</html>