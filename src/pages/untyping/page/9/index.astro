---
import Footer from "@components/Footer.astro";
---

<!doctype html>
<html id="untyping" lang="en">
  <head>
    <title>Untyping - Untyping</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link rel="stylesheet" type="text/css" href="/styles/screen.css" />


    </style>

  </head>

  <body class="myna" data-goal="load">
    <header id="top">
      <div class="container">
        <div class="row">
          <div class="span5 offset7">
            <div class="overlay title">
              <a href="/untyping">
                <h1>
                  <img src="/styles/images/untyping-logo.png" alt="Untyping" />
                </h1>
                <span class="strapline">The Untyped Weblog.</span>
              </a>
            </div>

            <div class="overlay about">
              Read on or <a href="/">return home.</a>
            </div>
          </div>
        </div>
      </div>

      <div class="shadow bottom"></div>
    </header>

    <div id="navbar-wrapper">
      <nav id="navbar" class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <ul class="nav">
              <li><a href="/#top">Home</a></li>
              <li><a href="/untyping">Weblog</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </div>

    <div class="shadow-wrapper">
      <div class="shadow top light"></div>

      <div class="container">
        <div class="row">
          <div id="blog" class="span10">
            <section
              id="post-177"
              class="post-177 post type-post status-publish format-standard hentry category-web-development"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">2 Aug 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/08/02/a-scheme-case-study/"
                      rel="bookmark"
                      title="Permanent Link to A Scheme Case Study"
                      >A Scheme Case Study</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      If you’ve looked at the <a
                        href="http://www.informatik.uni-bonn.de/~ralf/icfp07.html"
                        >ICFP 2007</a
                      > preliminary program you’ll have noticed we’re presenting
                      “Experience Report: Scheme in Commercial Web Application
                      Development”. We submitted the final version of the paper
                      a couple of weeks ago, and I’ve finally got around to
                      putting it<a href="/downloads/icfp068-welsh.pdf">online</a
                      > for your reading pleasure. The contents shouldn’t come
                      as a surprise: a summary of our experiences developing
                      commercial web applications in PLT Scheme over the last
                      year. We’ve tried to be honest, including the good and
                      bad. Hopefully the points you’ll take away are that we’ve
                      been able to overcome initial problems with stability, and
                      in a fairly short time we’ve developed a framework that
                      compares well to popular alternatives such as Ruby on
                      Rails.
                    </p>
                    <p>
                      The four page limit on experience reports is very tight,
                      and unfortunately our experiences with <a
                        href="http://www.flapjax-lang.org/">Flapjax</a
                      > were cut from the final version. So let me say here that
                      if you write Javascript code you need to check out
                      Flapjax! Our Flapjax code is about half the size of the
                      equivalent Javascript, and this is without using the
                      Flapjax compiler. The only problem with Flapjax is
                      performance in large networks. This is more a property of
                      the poor quality of Javascript interpreters: Wolfenstein
                      3D on my 286 back in 1990-something was smoother than <a
                        href="http://developer.mozilla.org/samples/raycaster/RayCaster.html"
                        >Javascript raycaster</a
                      > running today on my Powerbook. Luckily the new
                      developments taking place at Mozilla will alleviate this
                      problem in the next few years.
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a
                      href="/untyping/category/web-development/"
                      rel="category tag">Web development</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on A Scheme Case Study</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-179"
              class="post-179 post type-post status-publish format-standard hentry category-design"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">26 Jul 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/07/26/visual-manipulation/"
                      rel="bookmark"
                      title="Permanent Link to Visual Manipulation"
                      >Visual Manipulation</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      This post is about two different forms of visual
                      manipulation for artistic effect. Start by looking at
                      these<br />
                      <a
                        title="3d Sidewalk Art | 3d Sidewalk Chalk Drawings | 3d Sidewalk Illusions"
                        href="http://o.pticalillusions.com/3d-sidewalk-art/"
                        >pseudo-3D chalk drawings</a
                      >. The monocular vision of the camera enhances the effect
                      but I believe they would work in life if seen from the
                      right angle. There was an exhibition of pseudo-3D
                      paintings at the <a href="http://www.bmag.org.uk/"
                        >Birmingham Museum and Art Gallery</a
                      > and they worked very well — arguably better than in
                      photographs are you could actually walk around the works
                      and the effect was maintained for quite a wide viewing
                      angle.
                    </p>
                    <p>
                      Now you’re warmed up, we’re going to go into a time
                      machine <a href="http://www.loc.gov/exhibits/empire/"
                        >here</a
                      >and <a href="http://www.cs.cmu.edu/~dellaert/aligned/"
                        >here</a
                      >. I find the lack of colour in early photographs presents
                      a barrier that makes it difficult to imagine myself in the
                      scene. These colour photographs from the period 1909-1915
                      (reconstructed from red, green, and blue images using an
                      ingenious process) remove that barrier and the results are
                      striking. Some of the scenes — railways, forests, grand
                      buildings — could be contemporary, but note how few roads
                      there are, how few possessions are visible. I can relate
                      to the pictures and yet they still feel like another
                      world. Fantastic stuff.
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/design/" rel="category tag"
                      >Design</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Visual Manipulation</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-181"
              class="post-181 post type-post status-publish format-standard hentry category-business"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">18 Jul 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/07/18/power-to-the-people/"
                      rel="bookmark"
                      title="Permanent Link to Power to the People!"
                      >Power to the People!</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      A <a href="http://www.waitrose.com/">Waitrose</a> has
                      opened up near to Untyped Central and obviously Dave and I
                      are agog with excitement. Only just less exciting than the
                      thought of the great lunches we’re going to have is the
                      chance to see the <a
                        href="http://www.johnlewispartnership.co.uk/"
                        >John Lewis Partnership</a
                      > in action. They have a fairly unique corporate form, and
                      talk a good game, but do they deliver? I did my first test
                      today when I asked the checkout operator what is was like
                      to work for the Partnership. To my great surprise she
                      responded very positively and could give me specific
                      examples of the benefits. I don’t think many people could
                      answer half as well if quizzed about their government, for
                      example.
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/business/" rel="category tag"
                      >Business</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Power to the People!</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-184"
              class="post-184 post type-post status-publish format-standard hentry category-general"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">5 Jul 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/07/05/of-interest-05072007/"
                      rel="bookmark"
                      title="Permanent Link to Of Interest 05/07/2007"
                      >Of Interest 05/07/2007</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      There’s been a bit of a backlog building up for Untyping
                      while I work hard on other stuff. Here’s so the of the
                      stuff that has recently caught my eye:
                    </p>
                    <ul>
                      <li>
                        “Show, don’t tell” is an old mantra in creative writing.<br
                        />
                        <a
                          title="Announcing the Business of Software Wiki - Joel on Software"
                          href="http://www.joelonsoftware.com/items/2007/07/02.html"
                          >Announcing the Business of Software Wiki</a
                        > is a great example of this principle in action. Note
                        how Joel doesn’t tell you what a wiki is, which would be
                        boring, but shows you with a brief demonstration. In
                        addition to making more engaging prose showing conveys
                        information on how to use the wiki, which helps
                        bootstrap new users. Neat.
                      </li>
                      <li>
                        Facebook opened up an API recently. While Facebook could
                        make an engaging platform for many things Jason Kottke
                        gives a well-reasoned argument <a
                          href="http://www.kottke.org/07/07/facebook-vs-aol-redux"
                          >on why it probably isn’t a big deal</a
                        >
                      </li>
                      <li>
                        <a
                          href="http://mindblog.dericbownds.net/2007/06/perception-without-perceiver.html"
                          >Watching without being.</a
                        > Just read this. Its only a short blog post but there’s
                        too much in it to summarise here.
                      </li>
                    </ul>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/general/" rel="category tag"
                      >General</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Of Interest 05/07/2007</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-186"
              class="post-186 post type-post status-publish format-standard hentry category-web-development"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">20 Jun 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/06/20/selenium-code-released/"
                      rel="bookmark"
                      title="Permanent Link to Selenium Code Released"
                      >Selenium Code Released</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      The Selenium code I talked about in <a
                        href="http://www.untyped.com/untyping/archives/2007/05/xml_transformat.html"
                        >an earlier post</a
                      > has been<a
                        href="http://planet.plt-scheme.org/display.ss?package=selenium.plt&owner=untyped"
                        >released to PLaneT</a
                      >
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a
                      href="/untyping/category/web-development/"
                      rel="category tag">Web development</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Selenium Code Released</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-188"
              class="post-188 post type-post status-publish format-standard hentry category-design"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">19 Jun 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/06/19/font-rendering-fun/"
                      rel="bookmark"
                      title="Permanent Link to Font Rendering Fun"
                      >Font Rendering Fun</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      I’ve always wondered why fonts looked different on OS X
                      and Windows and thanks to <a
                        title="Coding Horror: Font Rendering: Respecting The Pixel Grid"
                        href="http://www.codinghorror.com/blog/archives/000885.html"
                        >this blog post</a
                      > I now know why. The summary is that Windows favours
                      aligning the fonts with the pixel grid, which leads to
                      clearer type but thinner blockier text. Follow the link to
                      see examples of the difference.
                    </p>
                    <p>
                      More interesting are the various font rendering techniques
                      in use. Microsoft’s <a
                        href="http://untyped.wpengine.com/2007/06/%3Cbr%20/%3Ehttp://en.wikipedia.org/wiki/ClearType"
                        >ClearType</a
                      > takes advantage of the known arrangement of pixels in
                      LCD monitors which effectively triples horizontal
                      resolution at the expensive of distorting colour. <a
                        href="http://artofcode.com/fontfocus/">FontFocus</a
                      > takes a different approach to get a better result. It
                      again focuses on aligning fonts with the pixel grid.
                      Here’s an explanation from the white paper linked above:
                    </p>
                    <blockquote>
                      <p>
                        Previous grid-fitting techniques … improve contrast by
                        aligning stems to pixel boundaries, but in doing so
                        distort individual letterforms. FontFocus leaves the
                        shapes of the glyphs completely unchanged. Instead, it
                        shifts each character left or right by a tiny subpixel
                        amount, and also subtly expands or condenses individual
                        glyphs to align all stems, if there are more than one. …
                      </p>
                      <p>
                        While the idea of subtly shifting and stretching glyphs
                        to enhance contrast is simple, the core of the of
                        FontFocus technology is how it chooses these tweaks.
                        Most existing font rendering techniques work with a
                        single glyph at a time. FontFocus optimizes the entire
                        word at a time. The results are similar to what you’d
                        get from trying each combination of subpixel offset and
                        width stretch for each glyph in the word, and picking
                        the combination with the best overall score. FontFocus
                        uses an intelligent divide-and-conquer algorithm to
                        avoid the combinatorial explosion of this brute-force
                        method.
                      </p>
                    </blockquote>
                    <p>
                      This immediately suggests a further improvement: try to
                      align a whole line of text optimally. Of course the search
                      space gets much larger so a better search method is
                      needed. If anyone is looking for a PhD this could be fun.
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/design/" rel="category tag"
                      >Design</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Font Rendering Fun</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-190"
              class="post-190 post type-post status-publish format-standard hentry category-fun"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">8 Jun 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/06/08/what-the-world-eats/"
                      rel="bookmark"
                      title="Permanent Link to What The World Eats"
                      >What The World Eats</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      <a
                        title="What the World Eats | Photo Essays | TIME"
                        href="http://www.time.com/time/photogallery/0,29307,1626519_1373755,00.html"
                        >What the World Eats</a
                      > is a moderately fascinating photo essay of the weekly
                      food consumption of 16 families around the world. The
                      choices and differences aren’t that unexpected, but it is
                      interesting none-the-less. Here are some thoughts:
                    </p>
                    <ul>
                      <li>
                        Those starving Africans really are. Of course I knew
                        that intellectually, but didn’t feel it till I saw what
                        they ate.
                      </li>
                      <li>
                        The Bhutan family’s food looks tasty. All those chillies
                        and ginger. Yum. Mexico and Cairo also look good.
                      </li>
                      <li>
                        I’m surprised the Sicilians have such anaemic looking
                        tomatoes. Perhaps the photo was taken in winter.
                      </li>
                      <li>
                        The backgrounds are fascinating. Almost the best thing
                        in the pictures. Favourites are Bhutan, Mongolia, and
                        Ecuador. What’s with the Western families that look like
                        they haven’t redecorated since the 1970s? I can just
                        feel the desert looking at the Kuwait house.
                      </li>
                    </ul>
                    <p>
                      For comparison the two of us spend around £40 on food a
                      week.
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/fun/" rel="category tag">Fun</a>
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on What The World Eats</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-192"
              class="post-192 post type-post status-publish format-standard hentry category-general"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">5 Jun 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/06/05/of-interest-05062007/"
                      rel="bookmark"
                      title="Permanent Link to Of Interest 05/06/2007"
                      >Of Interest 05/06/2007</a
                    >
                  </h2>

                  <div class="entry">
                    <p>Just some quick links. It has been a busy day.</p>
                    <ul>
                      <li>
                        [T]he human race publishes a book every 30 seconds. If
                        current trends continue, by 2052 the number of people
                        writing and publishing a book in a given year will
                        exceed the number of people who will read one.
                      </li>
                      <li>
                        <a
                          href="http://www.designobserver.com/archives/024858.html"
                          >From Design Observer</a
                        >
                        <p>
                          Last night I had my first foray onto eBay. As I
                          surveyed the hundreds of professional sellers my stuff
                          would be competing for attention against I thought I’d
                          missed the boat on this one. Looks like I have a few
                          years yet to impress any book-length ideas on the
                          world, but the window <em>is</em> closing.
                        </p>
                      </li>
                      <li>
                        <a
                          href="http://www.designobserver.com/archives/024858.html"
                          >Just everyone has linked to
                        </a><a
                          href="http://nymag.com/news/features/2007/profit/"
                          >the Profit Calculator</a
                        >, which lightly skims over how a variety of NY
                        businesses make money. Most interesting for me were the
                        drug dealer, the yoga studio, and Nobu.
                      </li>
                      <li>
                        Mark Fletcher <a
                          href="http://www.wingedpig.com/archives/2007/06/software_development_hypothesi_253.html"
                          >asks</a
                        > if distributed development leads to better
                        communication. Interesting idea. So far I’m undecided on
                        the basis of our efforts.
                      </li>
                    </ul>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/general/" rel="category tag"
                      >General</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Of Interest 05/06/2007</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-194"
              class="post-194 post type-post status-publish format-standard hentry category-code"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">10 May 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/05/10/xml-transformation-in-scheme/"
                      rel="bookmark"
                      title="Permanent Link to XML Transformation in Scheme"
                      >XML Transformation in Scheme</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      <a href="http://www.openqa.org/selenium/">Selenium</a> is
                      a tool for testing web applications, the core of which is
                      a Javascript library that controls a web browser. With
                      the <a href="http://www.openqa.org/selenium-ide/"
                        >Selenium IDE</a
                      > you can convert your actions in a web browser into
                      tests, and with the <a
                        href="http://www.openqa.org/selenium-rc/"
                        >Selenium Remote Control</a
                      > you can control a web browser from code. I’ve recently
                      been working on adding Selenium Remote Control bindings to
                      PLT Scheme, which has resulted in a nice and hopefully
                      instructional demonstration of XML transformation in PLT
                      Scheme
                    </p>
                    <p>
                      The Selenium Remote Control is controlled by sending
                      simple messages over HTTP. The format of the messages
                      isn’t important. What is, is that there are a lot of them,
                      and the API is specified in a file called <code
                        >iedoc.xml</code
                      > that comes with Selenium. The Java/Python/Ruby bindings
                      are generated using <a href="http://www.w3.org/Style/XSL/"
                        >XSL</a
                      >. If I was to use XSL I’d have a processing pipeline that
                      uses three languages (XSL, Java, Scheme) which is two more
                      than I’d like. Hence I turned to<a
                        href="http://planet.plt-scheme.org/display.ss?package=webit.plt&owner=jim"
                        >WebIt!</a
                      >, an XML transformation DSL written in Scheme, to create
                      an all Scheme pipeline. The rest of this post wshows the
                      steps I used to transform the Selenium API into Scheme
                      code using WebIt! I think this is interesting in its own
                      right, but also serves as a nice demonstration of the
                      power of macros, which WebIt! makes extensive use of.
                    </p>
                    <p>
                      My first step is to get an idea of the structure of the
                      XML. The bits I’m interested in look like this:
                    </p>
                    <pre
                      is:raw>
&lt;function name="click"&gt;
&lt;param name="locator"&gt;an element locator&lt;/param&gt;
&lt;comment&gt;Clicks on a link, button, checkbox or radio button.
If the click action causes a new page to load (like a link usually
does), call waitForPageToLoad.&lt;/comment&gt;
&lt;/function&gt;</pre>
                    <p>
                      Let’s read in the XML file and extract all the <code
                        >function</code
                      > elements. For this I’ll use SSAX and SXPath:
                    </p>
                    <div>
                      <pre
                        is:raw>
(require
(planet "ssax.ss" ("lizorkin" "ssax.plt" 1))
(only (planet "sxml.ss" ("lizorkin" "sxml.plt" 1)) sxpath))

(define api
(with-input-from-file "iedoc.xml"
(lambda () (ssax:xml-&gt;sxml (current-input-port) '()))))

(define functions
((sxpath '(// function)) api))</pre>
                    </div>
                    <p>
                      Ok, so we have all the functions. Now let’s parse them
                      into a more useful datastructure. Here’s my first attempt:
                    </p>
                    <div>
                      <pre
                        is:raw>
(require (planet "xml.ss" ("jim" "webit.plt" 1 5)))

;; struct function : string (listof string)
(define-struct function (name params))

;; parse-function : sxml -&gt; function
(define (parse-function fn)
(xml-match fn
[(function name: ,name
(param name: ,param-name ,desc) ...
(comment ,_ ...))
(make-function name (list param-name ...))]))

(map parse-function functions)</pre>
                    </div>
                    <p>
                      The <code>xml-match</code> macro is a pattern matcher for
                      SXML. You specify the “shape” of the SXML, and if the
                      input matches the pattern the following expressions are
                      evaluated:
                    </p>
                    <pre
                      is:raw>
(xml-match value
[(pattern expression <em>...</em>)]<em>...</em>)</pre>
                    <p>The simplified form of a pattern is:</p>
                    <ul>
                      <li>
                        <code>(element <em>...</em>)</code> matches an element
                        with the given name.
                      </li>
                      <li>
                        <code>name: value</code> matches an attribute with the
                        given name and value.
                      </li>
                      <li>
                        <code>,binding</code> binds the value of <code
                          >binding</code
                        > to the given name in the scope of the following
                        expressions.
                      </li>
                      <li>
                        <code>...</code> matches zero or more of the preceeding
                        patterns.
                      </li>
                    </ul>
                    <p>In our example the pattern is:</p>
                    <div>
                      <pre
                        is:raw>
     (function name: ,name
(param name: ,param-name ,desc) ...
(comment ,_ ...))</pre>
                    </div>
                    <p>
                      So we’re looking for an element called <code
                        >function</code
                      > with an attribute called <code>name</code> the value of
                      which is bound to <code>name</code>. Then follows zero or
                      more <code>param</code> elements, with attribute <code
                        >name</code
                      >, the value of which is bound to <code>param-name</code>.
                      Finally we expect a <code>comment</code> element which can
                      contain any amount of data. The use of <code>_</code> as
                      the binding name is a common convention to indicate data
                      we don’t care about but must still match to make our
                      pattern complete.
                    </p>
                    <p>I run the code in DrScheme and see the result:</p>
                    <div><em>xml-match: no matching clause found</em></div>
                    <p>
                      Oops. So our pattern isn’t complete. We’ve also seen one
                      flaw of WebIt!: it doesn’t give very good error messages.
                      However we can easily fix this by adding a catch all
                      pattern that raises an error telling us what we failed to
                      match. The code follows. Notice that I’ve also added
                      pretty printing to make the unmatched SXML easier to read.
                    </p>
                    <div>
                      <pre
                        is:raw>
(require (lib "pretty.ss"))

;; parse-function : sxml -&gt; function
(define (parse-function fn)
(xml-match fn
[(function name: ,name
(param name: ,param-name ,desc) ...
(comment ,_ ...))
(make-function name (list param-name ...))]
[,err (let ([op (open-output-string)])
(pretty-print err op)
(error (format "Didn't match ~n~a~n" (get-output-string op))))]))</pre>
                    </div>
                    <p>
                      Run this code and you’ll see the error occurs as we don’t
                      allow the description to contain more than one element.
                      This is easily fixed by extending the pattern to <code
                        >,desc ...</code
                      >. The next error is more interesting. The <code
                        >function</code
                      > element contains a <code>return</code> element. The
                      WebIt! pattern language doesn’t allows us to express
                      optional patterns, so we have to duplicate our pattern and
                      include the case of<code>return</code>. This also requires
                      we extend the defintion of the <code>function</code
                      >structure.
                    </p>
                    <div>
                      <pre
                        is:raw>
;; struct function : string string (listof string)
(define-struct function (name return params))

;; parse-function : sxml -&gt; function
(define (parse-function fn)
(xml-match fn
[(function name: ,name
(param name: ,param-name ,desc ...) ...
(comment ,_ ...))
(make-function name "void" (list param-name ...))]
[(function name: ,name
(return type: ,type ,return-desc ...)
(param name: ,param-name ,desc ...) ...
(comment ,_ ...))
(make-function name type (list param-name ...))]
[,err (let ([op (open-output-string)])
(pretty-print err op)
(error (format "Didn't match ~n~a~n" (get-output-string op))))]))</pre>
                    </div>
                    <p>
                      This works! This is as far as I want to go in this
                      article. We’ve seen how we can use SSAX. SXPath, and
                      WebIt! to create XML transforms in pure Scheme. There is a
                      lot more to all of these packages but what we’ve used is
                      sufficient for many uses. The rest of the code to create
                      Scheme from the API is quite straightforward and specific
                      to Selenium. If you’re curious read the source of the
                      Selenium PLaneT package, which will be released soon.
                    </p>
                    <p>
                      <em
                        >This post also appears on the <a
                          href="http://blog.plt-scheme.org/">PLT Scheme Blog</a
                        ></em
                      >
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/code/" rel="category tag"
                      >Code</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on XML Transformation in Scheme</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <section
              id="post-196"
              class="post-196 post type-post status-publish format-standard hentry category-design"
            >
              <div class="row">
                <div class="span2 meta">
                  <p class="date">3 May 2007</p>
                  <p class="author">by Noel</p>
                </div>

                <div class="span8">
                  <h2>
                    <a
                      href="/untyping/2007/05/03/get-it-right-or-left/"
                      rel="bookmark"
                      title="Permanent Link to Get It Right (or Left)!"
                      >Get It Right (or Left)!</a
                    >
                  </h2>

                  <div class="entry">
                    <p>
                      Next time you’re walking down the street and have to step
                      aside to avoid a fellow pedestrian, note which way you
                      move. The chances are you’ll step over to the side people
                      drive on in your country. Normally this is unconscious and
                      the two of you will smoothly avoid one another as if the
                      process had been choreographed. Go to a country where
                      people drive on the other side of the road and it will
                      become immediately noticeable as you play the hilarious
                      game of stepping-in-front-of-one-another. Why do I bring
                      this up? The local branch of <a
                        href="http://www.aldi-stores.co.uk/">Aldi</a
                      >has undergone redevelopment, including a new front door.
                      You enter on the right and leave on the left. I ambled up
                      not really paying attention and of course went to the
                      wrong side. So did the next three people after me. The
                      difference between a great design and a bad design is made
                      in the little details like this.
                    </p>
                  </div>

                  <p class="tags">
                    Posted in
                    <a href="/untyping/category/design/" rel="category tag"
                      >Design</a
                    >
                    |
                    <span
                      >Comments Off<span class="screen-reader-text">
                        on Get It Right (or Left)!</span
                      ></span
                    >
                  </p>
                </div>
              </div>
            </section>

            <nav>
              <div class="row">
                <div class="span8 offset2">
                  <span class="newer"
                    ><a href="/untyping/page/8/">&laquo; Newer Entries</a></span
                  >
                  <span class="older"
                    ><a href="/untyping/page/10/">Older Entries &raquo;</a
                    ></span
                  >
                  <div class="clear"></div>
                </div>
              </div>
            </nav>
          </div>
          <div class="span2">
            <div id="sidebar" class="small column two-of-two width300">
              <ul>
                <li id="recent-posts-2" class="widget widget_recent_entries">
                  <h2 class="widgettitle">Recent Posts</h2>
                  <ul>
                    <li>
                      <a
                        href="/untyping/2013/08/07/writing-documentation-using-grunt-and-jekyll/"
                        >Writing Documentation using Grunt and Jekyll</a
                      >
                    </li>
                    <li>
                      <a href="/untyping/2012/10/19/meanwhile-at-untyped-hq/"
                        >Meanwhile, at Untyped HQ&#8230;</a
                      >
                    </li>
                    <li>
                      <a href="/untyping/2012/08/28/new-site/">New site</a>
                    </li>
                    <li>
                      <a
                        href="/untyping/2012/06/06/myna-for-wordpress-available-now/"
                        >Myna for WordPress available now!</a
                      >
                    </li>
                    <li>
                      <a href="/untyping/2011/10/20/the-circus-is-in-town/"
                        >The Circus is in Town</a
                      >
                    </li>
                  </ul>
                </li>
                <li
                  id="recent-comments-2"
                  class="widget widget_recent_comments"
                >
                  <h2 class="widgettitle">Recent Comments</h2>
                  <ul id="recentcomments"></ul>
                </li>
                <li id="archives-2" class="widget widget_archive">
                  <h2 class="widgettitle">Archives</h2>
                  <ul>
                    <li><a href="/untyping/2013/08/">August 2013</a></li>
                    <li><a href="/untyping/2012/10/">October 2012</a></li>
                    <li><a href="/untyping/2012/08/">August 2012</a></li>
                    <li><a href="/untyping/2012/06/">June 2012</a></li>
                    <li><a href="/untyping/2011/10/">October 2011</a></li>
                    <li><a href="/untyping/2011/09/">September 2011</a></li>
                    <li><a href="/untyping/2011/08/">August 2011</a></li>
                    <li><a href="/untyping/2011/05/">May 2011</a></li>
                    <li><a href="/untyping/2011/03/">March 2011</a></li>
                    <li><a href="/untyping/2011/02/">February 2011</a></li>
                    <li><a href="/untyping/2011/01/">January 2011</a></li>
                    <li><a href="/untyping/2010/12/">December 2010</a></li>
                    <li><a href="/untyping/2010/11/">November 2010</a></li>
                    <li><a href="/untyping/2010/10/">October 2010</a></li>
                    <li><a href="/untyping/2010/07/">July 2010</a></li>
                    <li><a href="/untyping/2010/06/">June 2010</a></li>
                    <li><a href="/untyping/2010/05/">May 2010</a></li>
                    <li><a href="/untyping/2010/04/">April 2010</a></li>
                    <li><a href="/untyping/2010/03/">March 2010</a></li>
                    <li><a href="/untyping/2010/02/">February 2010</a></li>
                    <li><a href="/untyping/2010/01/">January 2010</a></li>
                    <li><a href="/untyping/2009/07/">July 2009</a></li>
                    <li><a href="/untyping/2009/06/">June 2009</a></li>
                    <li><a href="/untyping/2009/04/">April 2009</a></li>
                    <li><a href="/untyping/2009/03/">March 2009</a></li>
                    <li><a href="/untyping/2009/01/">January 2009</a></li>
                    <li><a href="/untyping/2008/11/">November 2008</a></li>
                    <li><a href="/untyping/2008/10/">October 2008</a></li>
                    <li><a href="/untyping/2008/09/">September 2008</a></li>
                    <li><a href="/untyping/2008/08/">August 2008</a></li>
                    <li><a href="/untyping/2008/07/">July 2008</a></li>
                    <li><a href="/untyping/2008/06/">June 2008</a></li>
                    <li><a href="/untyping/2008/05/">May 2008</a></li>
                    <li><a href="/untyping/2008/04/">April 2008</a></li>
                    <li><a href="/untyping/2008/03/">March 2008</a></li>
                    <li><a href="/untyping/2008/02/">February 2008</a></li>
                    <li><a href="/untyping/2008/01/">January 2008</a></li>
                    <li><a href="/untyping/2007/12/">December 2007</a></li>
                    <li><a href="/untyping/2007/11/">November 2007</a></li>
                    <li><a href="/untyping/2007/10/">October 2007</a></li>
                    <li><a href="/untyping/2007/09/">September 2007</a></li>
                    <li><a href="/untyping/2007/08/">August 2007</a></li>
                    <li><a href="/untyping/2007/07/">July 2007</a></li>
                    <li><a href="/untyping/2007/06/">June 2007</a></li>
                    <li><a href="/untyping/2007/05/">May 2007</a></li>
                    <li><a href="/untyping/2007/04/">April 2007</a></li>
                    <li><a href="/untyping/2007/03/">March 2007</a></li>
                    <li><a href="/untyping/2007/02/">February 2007</a></li>
                    <li><a href="/untyping/2007/01/">January 2007</a></li>
                    <li><a href="/untyping/2006/12/">December 2006</a></li>
                    <li><a href="/untyping/2006/11/">November 2006</a></li>
                    <li><a href="/untyping/2006/10/">October 2006</a></li>
                    <li><a href="/untyping/2006/09/">September 2006</a></li>
                    <li><a href="/untyping/2006/08/">August 2006</a></li>
                    <li><a href="/untyping/2006/07/">July 2006</a></li>
                    <li><a href="/untyping/2006/06/">June 2006</a></li>
                    <li><a href="/untyping/2006/05/">May 2006</a></li>
                    <li><a href="/untyping/2006/04/">April 2006</a></li>
                    <li><a href="/untyping/2006/03/">March 2006</a></li>
                    <li><a href="/untyping/2006/02/">February 2006</a></li>
                    <li><a href="/untyping/2006/01/">January 2006</a></li>
                    <li><a href="/untyping/2005/12/">December 2005</a></li>
                    <li><a href="/untyping/2005/11/">November 2005</a></li>
                    <li><a href="/untyping/2005/10/">October 2005</a></li>
                    <li><a href="/untyping/2005/09/">September 2005</a></li>
                    <li><a href="/untyping/2005/08/">August 2005</a></li>
                    <li><a href="/untyping/2005/07/">July 2005</a></li>
                    <li><a href="/untyping/2005/06/">June 2005</a></li>
                    <li><a href="/untyping/2005/05/">May 2005</a></li>
                    <li><a href="/untyping/2005/04/">April 2005</a></li>
                  </ul>
                </li>
                <li id="categories-2" class="widget widget_categories">
                  <h2 class="widgettitle">Categories</h2>
                  <ul>
                    <li class="cat-item cat-item-10">
                      <a href="/untyping/category/business/">Business</a>
                    </li>
                    <li class="cat-item cat-item-7">
                      <a href="/untyping/category/code/">Code</a>
                    </li>
                    <li class="cat-item cat-item-11">
                      <a href="/untyping/category/design/">Design</a>
                    </li>
                    <li class="cat-item cat-item-3">
                      <a href="/untyping/category/front-page/">Front page</a>
                    </li>
                    <li class="cat-item cat-item-9">
                      <a href="/untyping/category/fun/">Fun</a>
                    </li>
                    <li class="cat-item cat-item-6">
                      <a href="/untyping/category/functional-programming/"
                        >Functional Programming</a
                      >
                    </li>
                    <li class="cat-item cat-item-1">
                      <a href="/untyping/category/general/">General</a>
                    </li>
                    <li class="cat-item cat-item-12">
                      <a href="/untyping/category/javascript/">Javascript</a>
                    </li>
                    <li class="cat-item cat-item-14">
                      <a href="/untyping/category/kahu/">Kahu</a>
                    </li>
                    <li class="cat-item cat-item-4">
                      <a href="/untyping/category/myna/">Myna</a>
                    </li>
                    <li class="cat-item cat-item-13">
                      <a href="/untyping/category/racket/">Racket</a>
                    </li>
                    <li class="cat-item cat-item-8">
                      <a href="/untyping/category/scala/">Scala</a>
                    </li>
                    <li class="cat-item cat-item-5">
                      <a href="/untyping/category/web-development/"
                        >Web development</a
                      >
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <Footer />
    <script
      src="http://www.google-analytics.com/urchin.js"
      type="text/javascript"></script>
    <script type="text/javascript">
      _uacct = "UA-183641-1";
      urchinTracker();
    </script>
    <script is:inline src="//code.jquery.com/jquery-1.8.0.min.js"></script>
    <script is:inline src="/scripts/untyped.js"></script>
  </body>
</html>
